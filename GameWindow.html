<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="CSS/own.css">
    <link rel="stylesheet" href="CSS/gamewindow.css">
</head>

<body>
<div id="MB_grid-container">
    <!-- Code for header part of the screen (sliders) -->
    <div class="header" id="header">
        <div class="timeline">
            <input type="range" min="1" max="8000" value="1" class="timelineBar" id="NS_hamsterOne">
            <input type="range" min="1" max="8000" value="1" class="timelineBar" id="NS_hamsterTwo" style="margin-top: 30px">
        </div>
    </div>

    <!-- Code for left part of the screen -->
    <div class="left" id="left">
        <div id="matches" class="container"></div>
        <button id="btnStop" class="btn" value="" onclick="Game.closeGame()"> Stop the game </button>
    </div>

    <!-- Code for main part of the screen (game) -->
    <div class="main">
        <!-- DON'T TOUCH THE CANVAS -->
        <canvas onmousemove="drawBall(event)" id="c" style="width:800px;height:600px;">
            Not working
        </canvas>
    </div>

    <!-- Code for the right part of the screen (players) -->
    <div class="right" id="right"></div>

    <!-- Code for the footer part of the screen -->
    <!-- <p> is for debugging (Nicolas) -->
    <div class="footer" id="footer">
        <p id="error"></p>
        <audio autoplay>
            <source src="MUSIC/hall-of-mountain-king8bit.wav" type="audio/wav">
            Your browser does not support the audio element.
        </audio>
    </div>
</div>


<script src="JS/MatchMaker.js"></script>
<script src="JS/Match.js"></script>
<script src="JS/Elements/hamsterTimeline.js"></script>
<script src="JS/Play.js"></script>
<script src="JS/Player.js"></script>
<script src="JS/Elements/win2.js"></script>


<script>


    // Retrieve the object from storage
    if(localStorage.getItem('Game') != null){
        var retrievedObject = localStorage.getItem('Game');
        var oldGame = JSON.parse(retrievedObject);
        var Game = new Play();
        Game.reload(oldGame);

    }
    else{
        alert("Vous devez configurer la partie avant de pouvoir y jouer !")
        document.location.replace("VOUG_Prepa/GameBegin.html")
    }

    if(sessionStorage.getItem("TourOnePlayed") != "yes")
    {

        sessionStorage.setItem("currentPlayer", "0");
        sessionStorage.setItem("currentMatch", "0");
        var listPlayers = Game.getaPlayers();
        var listMatch = createMatches(listPlayers);
        sessionStorage.setItem("listPlayers", JSON.stringify(listPlayers));
        sessionStorage.setItem("listMatch", JSON.stringify(listMatch));
    }


    hamsterTimeline(8000);
</script>



<!-- TODO: mettre au propre le script pour l'affichage du match actuel en fonction des variables du tournoi -->
<script>
    var div = document.getElementById('matches');
    var html = "";

    var test = JSON.parse(sessionStorage.getItem(sessionStorage.(0)));



    // var test = SessionStorage.listMatch();
    //
    // //var game = JSON.parse(localStorage.getItem(localStorage.key(0)));
    // var table = Game.getaPlayers();
    //
    // for (var player = 0; player < table.length; player++) {
    //     var name = table[player].name;
    //     var hamster = table[player].idhamster;
    //     var ham = hamster.substr(0, 4);
    //     var avatar = ham + ".png";
    //
    //     html += '<div class="container" style="margin-top: 20px"><img style="height: 45px; width: 47px" src="IMAGE/Avatars/'
    //         + avatar + '"/><text style="margin-left: 10px">' + name + '</text></div>';
    // }
    //
    // div.innerHTML = html;
</script>



<script src="JS/Elements/canvas.js"></script>
<script src="JS/Elements/elements.js"></script>
<script src="JS/Elements/ball.js"></script>
<script src="JS/ShowPlayers.js"></script>

</body>
